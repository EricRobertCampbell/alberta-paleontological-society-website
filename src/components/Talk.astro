---
import { getYouTubeEmbedUrl } from '../utility/youtube'

interface Props {
    title?: string;
    speaker?: string;
    youtubeLink?: string;
}

const { title, speaker, youtubeLink } = Astro.props;
const embedUrl = youtubeLink ? getYouTubeEmbedUrl(youtubeLink) : null;
---

<div class="talk-wrapper">
    {(title || speaker) && (
        <div class="talk-header">
            {title && <h4 class="talk-title">{title}</h4>}
            {speaker && <p class="talk-speaker">{speaker}</p>}
        </div>
    )}
    {embedUrl && (
        <div class="talk-video-wrapper">
            <iframe
                class="talk-video"
                src={embedUrl}
                title={title || "YouTube video player"}
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen
            />
        </div>
    )}
</div>

<style>
    .talk-wrapper {
        display: flex;
        flex-direction: column;
        gap: calc(var(--theme-spacing-base));
    }
    .talk-header {
        display: flex;
        flex-direction: column;
        gap: calc(0.5 * var(--theme-spacing-base));
    }
    .talk-title {
        margin: 0;
        font-size: 1.25rem;
    }
    .talk-speaker {
        margin: 0;
        color: var(--accent-colour-medium);
        font-size: 1rem;
    }
    .talk-video-wrapper {
        width: 100%;
        aspect-ratio: 16 / 9;
    }
    .talk-video {
        width: 100%;
        height: 100%;
        border: none;
    }
</style>

