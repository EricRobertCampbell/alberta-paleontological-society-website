---
import Layout from "../../../layouts/Layout.astro";
import HeadingWithBackground from "../../../components/HeadingWithBackground.astro";
import Alert from "../../../components/Alert.astro";
import AmountSortedGraph from "../../../components/graphs/AmountSortedGraph.astro";
import PeopleSortingGraph from "../../../components/graphs/PeopleSortingGraph.astro";
import EfficiencyGraph from "../../../components/graphs/EfficiencyGraph.astro";
import YearlyTotals from "../../../components/graphs/YearlyTotals.astro";
import { getCollection } from 'astro:content';

export const prerender = true;

const fossilData = await getCollection('fossilSortingData');
---

<Layout subtitle="Fossil Sorting Data">
	<HeadingWithBackground
		background="/events/2025/fishSkull.jpeg"
		backgroundPositionY="50%"
	>
		<h1>Fossil Sorting Data</h1>
	</HeadingWithBackground>
	
	<p>
		Welcome to our fossil sorting data exploration page! This is where you can discover insights and statistics about our fossil sorting sessions. Here you'll find data visualizations, trends, and analysis related to our microfossil sorting efforts and the contributions of our dedicated volunteers.
	</p>

	<section>
		<h2>About This Data</h2>
		
		<p>
			This page showcases data collected from our fossil sorting sessions, including participation statistics, fossil discovery rates, and other metrics that help us understand the impact and progress of our research activities. The data helps us track our contributions to paleontological research and recognize the valuable work of our volunteers.
		</p>

		<p>
			<a href="/events/fossilsorting/data.json" download="fossilSortingData.json">
				ðŸ“¥ Download the raw data as JSON
			</a>
		</p>

		<Alert>
			<strong>Disclaimer:</strong> This data is provided for interest only and should generally be considered unreliable. The measurements and calculations are approximate and may contain errors or inconsistencies. This is just for fun!
		</Alert>
	</section>
	<section>
		<h2>Learning More</h2>
		
		<p>
			Interested in learning more or contributing to our fossil sorting efforts? Visit our <a href="/events/fossilsorting/">main fossil sorting page</a> to learn more about upcoming sessions and how you can participate in this exciting research activity.
		</p>
		<p>
			If you would rather explore recent finds, take a look at the <a href="/events/fossilsorting/images/">Fossil Sorting image gallery</a>.
		</p>
	</section>
	<section>
		<h2>
			Dashboard
		</h2>
		
		<YearlyTotals />
		
		<div class="graphs-grid">
			<div>
				<AmountSortedGraph />
			</div>
			<div>
				<PeopleSortingGraph />
			</div>
			<div>
				<EfficiencyGraph />
			</div>
		</div>
	</section>
</Layout>

<style>
	.graphs-grid {
		display: grid;
		grid-template-columns: 1fr;
		gap: 1.5rem;
		border-top: 1px solid var(--background-colour-darker);
		padding-top: 1.5rem;
	}

	@media (min-width: 768px) {
		/* Desktop: Create a 2-column grid layout */
		.graphs-grid {
			grid-template-columns: 1fr 1fr;
		}

		/* Make the first graph (AmountSortedGraph) span the full width across both columns */
		.graphs-grid :first-child {
			grid-column: 1 / 3;
		}
	}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
