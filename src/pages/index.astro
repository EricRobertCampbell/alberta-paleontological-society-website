---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import Event from "../components/Event.astro";

import { getCollection } from "astro:content";

import {
	APS_FACEBOOK_LINK,
	APS_YOUTUBE_LINK,
	getTodayString,
} from "../utility";
import initialImage from "../../public/assets/warner_1.jpg";
console.log({ initialImage });

// get the next event
const todayString = getTodayString();

const allEvents = await getCollection("events");
const renderedEvents = (
	await Promise.all(
		allEvents.map(async (event) => {
			return await event.render();
		})
	)
)
	.filter((e) => {
		return e.remarkPluginFrontmatter.startDate > todayString;
	})
	.sort((e1, e2) => {
		return -e1.remarkPluginFrontmatter.startDate.localeCompare(
			e2.remarkPluginFrontmatter.startDate
		);
	});

let nextEvent;
if (renderedEvents.length > 0) {
	nextEvent = renderedEvents[renderedEvents.length - 1];
}
/* src="https://mychn.org/wp-content/uploads/2022/04/frustrated-young-african-american-businessman-having-bad-headache-768x577.jpg" */
---

<Layout title="Alberta Paleontological Society">
	<section>
		<img
			src={"/assets/warner_1_low.jpg"}
			id="initial-image"
			alt="APS members listening to a description of the Devil's Coulee fossil locality"
		/>
		<p>
			The Alberta Paleontological Society (APS) is a non-profit
			organization founded in 1986. Our main goal is to promote the
			science of paleontology through study and education. The APS makes
			important contributions to the field by discovering new findings and
			responsibly collecting, curating, and displaying significant fossil
			specimens. We are passionate about educating the general public,
			sharing knowledge about paleontological discoveries, and fostering
			an appreciation for the ancient past.
		</p>

		<p>
			Moreover, the society is committed to preserving paleontological
			materials for the benefit of future generations. To achieve our
			mission, the APS actively collaborates with professional and
			academic communities, working together to safeguard and enhance the
			understanding of Alberta's rich cultural heritage.
		</p>

		<p>
			The Alberta Paleontological Society is dedicated to spreading the
			wonders of paleontology, ensuring that people of all ages can
			explore and appreciate the fascinating world of prehistoric life.
		</p>
	</section>
	{
		nextEvent && (
			<section>
				<h2>Next Event</h2>
				<Event
					frontmatter={nextEvent.remarkPluginFrontmatter}
					last={true}
				>
					<nextEvent.Content />
				</Event>
				<p>
					For more information, see our{" "}
					<a href="/events/">events page</a>.
				</p>
			</section>
		)
	}
	<section>
		<h3>Become a Member!</h3>
		<p>
			Become a member of the Alberta Paleontological Society and unlock a
			world of paleontological discovery. Engage with fellow enthusiasts,
			support fossil education, and gain exclusive access to field trips
			and resources that enrich your understanding of prehistoric life. <a
				href="/members/"
			>
				Join us today</a
			> and embark on a journey through time together.
		</p>
	</section>
	<section>
		<h3>We're on social media!</h3>
		<p>
			Connect with us to get the latest news, pictures, and recordings of
			our presentations.
		</p>
		<div id="social-links">
			<a href={APS_FACEBOOK_LINK}>
				<img
					class="social-img"
					src="/logos/f_logo_RGB-Blue_58.png"
					style={{ verticalAlign: "middle" }}
					title="Facebook"
				/></a
			>
			<a href={APS_YOUTUBE_LINK}>
				<img
					class="social-img"
					src="/logos/yt_logo_rgb_light.png"
					style={{ verticalAlign: "middle" }}
					title="YouTube"
				/></a
			>
		</div>
	</section>
	<section>
		<h3>The APS has a new book for sale!</h3>{" "}
		<div
			style={{
				display: "flex",
				flexDirection: "column",
			}}
		>
			<h4 style={{ textAlign: "center" }}>APS Books for Sale</h4>
			<div id="book-pictures">
				<a href="store#hopejohnson">
					<img
						alt="Now There Was a Lady!"
						src="/ladycoversmall.jpg"
					/>
				</a>
				<a href="store#commonvertebratefossils">
					<img
						alt="Guide to Common Vertebrate Fossils from the Cretaceous of Albera"
						src="/guidetofossilssmall.jpg"
						style={{ marginRight: "8px" }}
					/>
				</a>
			</div>

			<p>
				Refer to the <a href="store">Store</a> link on this website for cost,
				how to purchase a copy and other details. These books will also be
				available for purchase at our monthly meetings.
			</p>
		</div>{" "}
	</section>
	<section>
		<h2>Privacy Policy</h2>
		<p>
			Please see our <a href="privacypolicy">Privacy Policy</a> for our policies
			regarding privacy, copyright, and liability.
		</p>
	</section>
</Layout>

<style>
	section {
		padding-bottom: calc(3 * var(--theme-spacing-base));
	}

	section:not(:last-of-type) {
		margin: 3px 0px;
		margin-bottom: 8px;
		border-bottom: solid 1px black;
	}
	h1 {
		font-size: 3rem;
		font-weight: 800;
		margin: 0;
	}
	img.social-img {
		height: 3rem;
		padding: 4px;
	}

	#book-pictures {
		display: flex;
		flex-direction: column;
		align-content: center;
		justify-content: center;
	}

	#book-pictures a {
		text-align: center;
		padding: var(--theme-spacing-base);
	}

	/* Making it responsive  - these styles should be applied for the desktop version*/
	@media screen and (min-width: 768px) {
		#book-pictures {
			flex-direction: row;
			justify-content: center;
		}
	}

	#initial-image {
		float: left;
		margin-right: calc(4 * var(--theme-spacing-base));
		margin-top: calc(1 * var(--theme-spacing-base));
		margin-bottom: 0;
		width: 40%;
	}
</style>
